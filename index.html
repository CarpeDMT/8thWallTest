<html>
  <head>
    <title>A-Frame Geojson Component - Basic</title>
    <meta name="description" content="Basic example for Geojson component."></meta>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="aframe-geojson-component.min.js"></script>
    <script src="ThirdParty/jquery-3.1.1.min.js"></script>


  <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/xrextras -->
  <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>

  <!-- 8thWall Web - Replace the app key here with your own app key -->
  <script src="//apps.8thwall.com/xrweb?appKey=4FJLYhPesbCFf23KoRf4j49vLt5SXAJs0XirXcsMDKnbvChSbL9FKNhqsJSbQ9benLpsir"></script>

   <script>
      // This component gives the invisible hider walls the property they need
      AFRAME.registerComponent('hider-material', {
        init: function() {
          const mesh = this.el.getObject3D('mesh')
          mesh.material.colorWrite = false
        },
      })

      // This component hides and shows certain elements as the camera moves
      AFRAME.registerComponent('portal', {
        schema: {
          width: {default: 4},
          height: {default: 6},
          depth: {default: 1},
        },
        init: function(){
          this.camera = document.getElementById('camera')
          this.contents = document.getElementById('portal-contents')
          this.walls = document.getElementById('hider-walls')
          this.portalWall = document.getElementById('portal-wall')
          this.portalWorld = document.getElementById('portal-world')
          this.isInPortalSpace = false
          this.wasOutside = true
        },
        tick: function() {
          const position = this.camera.object3D.position

          const isOutside = position.z  > this.data.depth / 2
          const withinPortalBounds =
            position.y < this.data.height && Math.abs(position.x) < this.data.width / 2

          if (this.wasOutside != isOutside && withinPortalBounds) {
            this.isInPortalSpace = !isOutside
          }

          this.contents.object3D.visible = this.isInPortalSpace || isOutside
          this.walls.object3D.visible = !this.isInPortalSpace && isOutside
          this.portalWall.object3D.visible = this.isInPortalSpace && !isOutside
          this.portalWorld.object3D.visible = this.isInPortalSpace

          this.wasOutside = isOutside
        }
      })

    </script>

  </head>
  <body>
    <a-scene  xrweb="disableWorldTracking: true"
    xrextras-gesture-detector
    xrextras-almost-there
    xrextras-loading
    xrextras-runtime-error>
      <a-assets>
        <a-asset-item id="json-world-110m" src="assets/world-110m.v1.json" />
        <a-asset-item id="tsv-world-110m" src="assets/world-110m.v1.tsv" />
        <a-asset-item id="json-places" src="assets/ne_110m_populated_places_simple.geojson" />
        <a-asset-item id="json-geographiclines" src="assets/geographiclines.geojson" />

         <!-- Credit to Poly by Google for the model: https://poly.google.com/view/dA5osnS0Rzj -->
      
      <a-asset-item id="jelly-glb" src="Storm_Cloud.glb"></a-asset-item>

      <a-asset-item id="palm_trees" src="Palm_Trees.glb"></a-asset-item>



      <img id="Helicopter" src="targets/Helicopter.jpg">
     
     <img id="trump" src="trump.png">
     
      
      <img id="Academy" src="targets/Academy.jpg">
      
      <img id="Herald" src="Motors.png">

      <img id="Charger" src="targets/Charger.jpg">
      
      <img id="Motor" src="targets/Motors.jpg">
      
      <video
        id="Motors_Vid"
        autoplay= true
        muted
        crossorigin="anonymous"
        loop="true"
        src="Motors.mp4">
      </video>

     

        <video
        id="Helicopter_Vid"
        autoplay= true
        muted
        crossorigin="anonymous"
        loop="true"
        src="WhyWearBad.mp4">
      </video>

      

      </a-assets>

      <a-camera
      position="0 4 10"
      raycaster="objects: .cantap"
      cursor="fuse: false; rayOrigin: mouse;">
    </a-camera>


    <a-light type="directional" intensity="0.5" position="1 1 1"></a-light>

    <a-light type="ambient" intensity="1"></a-light>

    <!-- Note: "name:" must be set to the name of the image target uploaded to the 8th Wall Console -->
   

    <a-entity xrextras-named-image-target="name: Motor"
    position = "0 0 0"
      >
      <!-- Add a child entity that can be rotated independently of the image target. -->
      <a-entity xrextras-one-finger-rotate gltf-model="#jelly-glb"
      position = "0.4 .3 0"
      rotation = "90 0 0"
      scale = "3.5 3.5 3.5"></a-entity>
    </a-entity>
    
<a-entity xrextras-named-image-target="name: Charger">
      <a-entity position = "0.44342 0.0415 0" rotation="0 0 -90" scale="0.014 0.014 0.014"> 


           
      <a-box scale="1 6 1" position="-2.5 3 0" color="cyan" material="" geometry=""></a-box>
      <a-box scale="1 6 1" position="2.5 3 0" color="cyan" material="" geometry=""></a-box>
      <a-box scale="6 1 1" position="0 6.5 0" color="cyan" material="" geometry=""></a-box><a-box scale="6 1 1" position="0 0.10967 0" color="cyan" material="" geometry=""></a-box>

      <!-- Hider walls -->
      <a-entity id="hider-walls">
        <a-box scale="6 100 1" position="0 57 0" hider-material="" material="" geometry=""></a-box>
        <a-box scale="94 100 1" position="-50 50 0" hider-material="" material="" geometry=""></a-box><a-box scale="94 100 1" position="1.36307 23.31382 -335.17321" hider-material="" material="" geometry=""></a-box>
        <a-box scale="94 100 1" position="50 50 0" hider-material="" material="" geometry=""></a-box>
        <a-box scale="200 100 1" position="0 50 200" hider-material="" material="" geometry=""></a-box>
        <a-box scale="200 1 201" position="0 100 100" hider-material="" material="" geometry=""></a-box>
        <a-box scale="200 2.47777 199" position="0 -1.20797 100" hider-material="" material="" geometry=""></a-box>
        <a-box scale="1 100 200" position="-100 50 100" hider-material="" material="" geometry=""></a-box>
        <a-box scale="1 100 200" position="100 50 100" hider-material="" material="" geometry=""></a-box>
      </a-entity>

      <a-entity id="portal-wall">
        <a-plane scale="4 6 1" rotation="180 0 0" position="0 3 0.5" hider-material="" material="" geometry=""></a-plane>
      </a-entity>

      <a-entity id="portal-contents">
        <a-entity scale="0.49033 0.62528 0.49033" position="0 0.49753 -3.86633" gltf-model="Palm_Trees.glb"></a-entity>
        
        <a-box scale="200 1 100" position="0 17.10993 -7.69965" color="blue" material="color: #e3f5f3" geometry=""></a-box>
      </a-entity>

      <a-entity id="portal-world">
        <a-box scale="200 1 100" position="0 -0.5 49.5" color="blue" material="" geometry="" visible="false"></a-box>
      </a-entity>
    </a-entity>


    

    

    <a-entity xrextras-named-image-target="name: Academy" position="-0.05623 -0.00214 0.24257" visible="false">
      <!-- Add a child entity that can be rotated independently of the image target. -->
      <a-entity xrextras-one-finger-rotate="" gltf-model="Palm_Trees.glb" position="-0.7 -0.2 0" rotation="" scale="0.1 0.1 0.1" class="cantap"></a-entity>
    </a-entity>
    
    <!-- Note: "name:" must be set to the name of the image target uploaded to the 8th Wall Console -->
    


      
      


    </a-entity>


    

   
      


    </a-scene>
  </body>
</html>
